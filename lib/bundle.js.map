{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./lib/character.js","webpack:///./lib/coin.js","webpack:///./lib/game.js","webpack:///./lib/main.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;;;;;;;;;;;;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;;AAEA;;;;;;;;;;;;ACjBA,aAAa,mBAAO,CAAC,6BAAQ;;;;AAI7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;AAIA;AACA,kBAAkB,uBAAuB;AACzC;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB,uBAAuB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,aAAa;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;;;;;;;;;;;;;ACzGA,kBAAkB,mBAAO,CAAC,uCAAa;AACvC,aAAa,mBAAO,CAAC,6BAAQ;;AAE7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;;;;AAKA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./lib/main.js\");\n","const RUN_IMAGE = ['lib/image/run1.png', 'lib/image/run2.png', 'lib/image/run3.png', 'lib/image/run4.png',\n              'lib/image/run5.png', 'lib/image/run6.png', 'lib/image/run7.png'];\nconst BACK_IMAGE = ['lib/image/back1.png', 'lib/image/back2.png', 'lib/image/back3.png', 'lib/image/back4.png',\n              'lib/image/back5.png', 'lib/image/back6.png', 'lib/image/back7.png'];\nclass Character{\n  constructor(ctx){\n    this.username = '';\n    this.score = 0;\n    this.x = 680;\n    this.y = 400;\n    this.width = 120;\n    this.height = 100;\n    this.image = new Image();\n    this.ctx = ctx;\n    this.idx = 0;\n    this.image.src = RUN_IMAGE[this.idx];\n    this.IMAGE = RUN_IMAGE;\n  }\n\n  draw(){\n    this.ctx.drawImage(this.image, this.x, this.y, this.width, this.height);\n    this.image.src = this.IMAGE[Math.floor(this.idx)];\n    this.idx += 0.1;\n    if(Math.floor(this.idx) === 7){this.idx = 0;}\n  }\n\n  handleRight(){\n    this.IMAGE = BACK_IMAGE;\n    if(this.x < 800 - this.width){\n      this.x += 30;\n    }\n  }\n\n  handleLeft(){\n    this.IMAGE = RUN_IMAGE;\n    if(this.x > 0){\n      this.x -= 30;\n    }\n  }\n\n}\n\n\n\nmodule.exports = Character;\n","\nclass Coin{\n  constructor(ctx){\n    this.x = Math.random()*800;\n    this.y = 0.1;\n    this.ctx = ctx;\n    this.image = new Image();\n    this.image.src = 'lib/image/coin.png';\n  }\n\n  draw(){\n    this.ctx.drawImage(this.image, this.x, this.y, 30, 30);\n  }\n\n\n}\n\nmodule.exports = Coin;\n","const Coin = require('./coin');\n\n\n\nclass Game{\n  constructor(ctx, myCanvas, character){\n    this.image = new Image();\n    this.innerHeight = myCanvas.height;\n    this.innerWidth = myCanvas.width;\n    this.ctx = ctx;\n    this.character = character;\n    this.time = 30.0;\n    this.coins = [new Coin(this.ctx)];\n    this.status = true;\n    this.intervalFunction = this.intervalFunction.bind(this);\n    this.move = this.move.bind(this);\n    document.addEventListener('keydown', this.move );\n  }\n\n  move(event){\n    console.log('move');\n    if(event.keyCode === 39){\n      this.character.handleRight();\n    }else if(event.keyCode === 37){\n      this.character.handleLeft();\n    }\n  this.prelude = document.getElementById('prelude');\n  this.bgm = document.getElementById('bgm');\n  this.bgm.play();\n  }\n\n  collisionController(coin){\n  return (coin.x > this.character.x) && (coin.x < this.character.x + this.character.width) &&\n         (coin.y >= this.character.y) && (coin.y < this.character.y + this.character.height/2);\n\n  }\n\n\n\n  updateCoins(){\n    for(let i = 0; i < this.coins.length; i++){\n      this.coins[i].y += 1;\n    }\n\n    if(this.coins.length > 0 && this.coins[0].y >= this.innerHeight - 10){\n      this.coins.shift();\n    }\n    let newCoins;\n    for(let i = 0; i < this.coins.length; i++){\n      if(this.collisionController(this.coins[i])){\n        newCoins = this.coins.slice(0,i).concat(this.coins.slice(i+1));\n        this.character.score += 1;\n      }\n    }\n    this.coins = newCoins ? newCoins : this.coins;\n    this.ctx.clearRect(0,0,800,500);\n  }\n\n\n  intervalFunction(){\n    debugger\n    let myReq = requestAnimationFrame(this.intervalFunction);\n    this.updateCoins();\n    this.ctx.font = 'bold 20px Arial';\n    this.ctx.fillText('Time: ' + ('0'+this.time.toFixed(2)).slice(-5), 70, 23);\n    this.ctx.fillText('Score: '+ this.character.score, 750, 23);\n    let length = this.coins.length;\n    if(length > 0 && this.coins[length-1].y > 50 ){\n      this.coins.push(new Coin(this.ctx));\n    }\n    this.time -= 0.016;\n    console.log(this.time);\n    this.character.draw();\n    for(let i = 0; i < length ; i++){\n      this.coins[i].draw();\n    }\n    if(this.time <= 0 ){\n      document.removeEventListener('keydown', this.move);\n      cancelAnimationFrame(myReq);\n      this.resetGamePage();\n      this.status = false;\n    }\n  }\n\n\n  resetGamePage(){\n    this.bgm.pause();\n    this.prelude.play();\n    this.ctx.clearRect(0,0,800,500);\n    this.image.onload = () => {\n      this.ctx.drawImage(this.image, 250, 120,250,200);\n    };\n    this.image.src = 'lib/image/run1.png';\n\n    this.ctx.font = 'bold 20px Arial';\n    this.ctx.fillText('Your score is '+ this.character.score, 400, 370);\n\n    this.ctx.font = 'bold 20px Arial';\n    this.ctx.textAlign = 'center';\n    this.ctx.fillText(\"press N to restart the game\", 400, 400);\n    document.addEventListener('keydown', window.start, false);\n  }\n\n\n}\n\nmodule.exports = Game;\n","\nconst Character = require('./character');\nconst Game = require('./game');\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  var myCanvas = document.getElementById('myCanvas');\n  var ctx = myCanvas.getContext(\"2d\");\n  window.games = [];\n  let character = new Character(ctx);\n\n  let image = new Image();\n  image.onload = () => {\n    ctx.drawImage(image, 240,50);\n  };\n\n  let muteButton = document.getElementsByClassName('mute')[0];\n\n  muteButton.onclick = function(){\n    Array.from(document.getElementsByTagName('audio')).map(e => {\n      e.muted = e.muted ? false : true;\n    });\n  };\n\n\n\n\n  image.src = 'lib/image/fixproblem.jpg';\n  ctx.font = 'bold 35px Arial';\n  ctx.textAlign = 'center';\n  ctx.fillText(\"press N to start\", 400, 400);\n\n  let game;\n  document.addEventListener('keydown', start, false);\n\n  function start(event){\n    if(event.keyCode === 78){\n      game = new Game(ctx, myCanvas, character);\n      window.games.push(game);\n      document.removeEventListener('keydown', start, false);\n      debugger\n      requestAnimationFrame(game.intervalFunction);\n    }\n  }\n\n  window.start = start;\n\n});\n"],"sourceRoot":""}